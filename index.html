<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>B.I.A.M ‚Äì Study Suite</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- --------- THEME & DESIGN SYSTEM --------- -->
<style>
:root{
  /* colour tokens ‚Äì light */
  --brand : #2563eb;
  --brand-h:#1d4ed8;
  --bg    : #f9fafb;
  --bg-h  : #f3f4f6;
  --card  : #ffffff;
  --card-h: #e5e7eb;
  --text  : #111827;
  --text-sub:#475569;
  --border:#d1d5db;
  --green : #22c55e;
  --red   : #ef4444;
  --radius:.75rem;
  --shadow:0 4px 12px rgb(0 0 0/.07);
  --z-nav : 200;
}
/* dark palette toggled via .dark on <html> */
html.dark{
  --bg   : #0f172a;
  --bg-h : #1e293b;
  --card : #1e293b;
  --card-h:#334155;
  --text : #f1f5f9;
  --text-sub:#94a3b8;
  --border:#475569;
  --shadow:0 4px 20px rgb(0 0 0/.5);
}
*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%}
body{
  font:400 1rem/1.55 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);color:var(--text);display:flex;flex-direction:column;
  -webkit-font-smoothing:antialiased;scroll-behavior:smooth;
}

/* header / nav */
header{background:var(--brand);color:#fff;padding:.8rem 1rem;display:flex;justify-content:space-between;align-items:center}
header h1{font-size:1.15rem;font-weight:600;white-space:nowrap}
.theme-toggle{appearance:none;background:none;border:0;color:inherit;font-size:1.25rem;cursor:pointer}

nav{
  position:sticky;top:0;z-index:var(--z-nav);
  background:var(--card);display:flex;border-bottom:1px solid var(--border)
}
nav button{
  flex:1 0 110px;padding:.8rem .5rem;background:none;border:0;
  color:var(--text-sub);font-weight:600;letter-spacing:.01em;cursor:pointer;
}
nav button.active{color:var(--brand);position:relative}
nav button.active::after{
  content:'';position:absolute;left:0;right:0;bottom:0;height:3px;
  background:var(--brand)
}
nav button:hover{background:var(--bg-h)}

main{flex:1;padding:1.25rem;display:flex;justify-content:center}
.view{display:none;width:100%;max-width:960px;margin:auto}
.view.active{display:block}

/* ---------- COMPONENT TOKENS ---------- */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.4rem;
  border-radius:var(--radius);font-weight:600;font-size:.95rem;
  padding:.6rem 1.25rem;cursor:pointer;transition:background .25s,border-color .25s,color .25s
}
.btn-fill{background:var(--brand);color:#fff;border:1px solid var(--brand)}
.btn-fill:hover{background:var(--brand-h);border-color:var(--brand-h)}
.btn-ghost{background:none;border:2px solid var(--brand);color:var(--brand)}
.btn-ghost:hover{background:var(--brand);color:#fff}
.btn-neutral{background:var(--bg-h);border:1px solid var(--border)}
.btn-neutral:hover{background:var(--card-h)}
/* cards */
.card-box{
  perspective:1200px;margin:auto;max-width:500px;width:100%;
}
.card{
  position:relative;width:100%;height:260px;border-radius:var(--radius);
  background:var(--card);box-shadow:var(--shadow);
  display:flex;align-items:center;justify-content:center;text-align:center;padding:1rem;
  font-size:1.15rem;font-weight:500;transform-style:preserve-3d;transition:transform .6s;
}
.card.flipped{transform:rotateY(180deg)}
.card .side{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:1rem}
.card .back{transform:rotateY(180deg)}
/* lists */
.option{border:1px solid var(--border);background:var(--card-h);padding:.9rem;
  border-radius:var(--radius);width:100%;text-align:left;font:inherit}
.option:hover:not([disabled]){background:var(--bg-h)}
.correct{background:var(--green)!important;color:#fff;border-color:var(--green)!important}
.wrong  {background:var(--red )!important;color:#fff;border-color:var(--red )!important}
/* quiz block spacing */
.block{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem}
/* textarea */
textarea{
  width:100%;min-height:140px;background:var(--card-h);border:1px solid var(--border);
  border-radius:var(--radius);padding:1rem;color:inherit;resize:vertical
}
/* notes */
.notes{background:var(--card);padding:2rem;border-radius:var(--radius);box-shadow:var(--shadow)}
/* floating selection ask */
#selAsk{
  position:fixed;z-index:9999;display:none;padding:.55rem 1.1rem;
  background:var(--brand);color:#fff;border:0;border-radius:var(--radius);
  box-shadow:var(--shadow);font-weight:600;font-size:.9rem;cursor:pointer
}
@media(max-width:600px){
  .card{height:200px}.btn{flex:1}
}
</style>
</head>

<body>
<header>
  <h1>B.I.A.M&nbsp;Study&nbsp;Suite</h1>
  <button id="themeBtn" class="theme-toggle" aria-label="Toggle colour scheme">üåô</button>
</header>

<nav>
  <button class="active" data-view="flash">Flashcards</button>
  <button data-view="mcq">Multiple-Choice</button>
  <button data-view="written">Written</button>
  <button data-view="tf">True / False</button>
  <button data-view="notes">Notes</button>
</nav>

<main>
  <!-- Flashcards -->
  <section id="flash" class="view active">
    <div class="card-box">
      <div id="fcCard" class="card">
        <div class="side front" id="fcQ"></div>
        <div class="side back"  id="fcA"></div>
      </div>
    </div>
    <div style="display:flex;gap:.75rem;justify-content:center;margin-top:1rem;flex-wrap:wrap">
      <button id="fcPrev" class="btn btn-neutral">Prev</button>
      <button id="fcNext" class="btn btn-fill">Next</button>
      <button id="fcAsk"  class="btn btn-ghost">Ask ChatGPT</button>
    </div>
  </section>

  <!-- MCQ -->
  <section id="mcq" class="view">
    <div id="mcqWrap"></div>
    <p id="mcqScore" style="font-weight:700;text-align:center"></p>
  </section>

  <!-- Written -->
  <section id="written" class="view">
    <div class="block">
      <p id="waQ" style="font-weight:600"></p>
      <textarea id="waInput" placeholder="Type your answer‚Ä¶"></textarea>
      <button id="waShow" class="btn btn-fill">Show Model Answer</button>
      <div id="waA" style="font-weight:600"></div>
      <div style="display:flex;flex-wrap:wrap;gap:.75rem;justify-content:center">
        <button id="waPrev" class="btn btn-neutral">Prev</button>
        <button id="waNext" class="btn btn-fill">Next</button>
        <button id="waAsk" class="btn btn-ghost">Ask ChatGPT</button>
      </div>
    </div>
  </section>

  <!-- True / False -->
  <section id="tf" class="view">
    <div class="block">
      <p id="tfQ" style="font-weight:600"></p>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <button class="btn option" data-val="true">True</button>
        <button class="btn option" data-val="false">False</button>
      </div>
      <p id="tfFeedback" style="font-weight:700"></p>
      <div style="display:flex;flex-wrap:wrap;gap:.75rem;justify-content:center">
        <button id="tfPrev" class="btn btn-neutral">Prev</button>
        <button id="tfNext" class="btn btn-fill">Next</button>
        <button id="tfAsk" class="btn btn-ghost">Ask ChatGPT</button>
      </div>
    </div>
  </section>

  <!-- Notes -->
  <section id="notes" class="view">
    <article id="notesBox" class="notes">Loading‚Ä¶</article>
  </section>
</main>

<button id="selAsk">Ask&nbsp;ChatGPT</button>

<script>
/* ---------- utilities ---------- */
const $ = sel => document.querySelector(sel);
const $$ = sel => [...document.querySelectorAll(sel)];
const shuffle = a => { for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}};
const promptLink = p=>`https://chatgpt.com/?model=gpt-4o&temporary-chat=true&q=${encodeURIComponent(p)}`;
const loadJSON = fetch('data.json').then(r=>r.json());
/* ---------- theme toggle ---------- */
const themeBtn = $('#themeBtn');
themeBtn.onclick=()=>{
  document.documentElement.classList.toggle('dark');
  themeBtn.textContent=document.documentElement.classList.contains('dark')?'‚òÄÔ∏è':'üåô';
};

/* ---------- navigation ---------- */
$$('nav button').forEach(btn=>{
  btn.onclick=()=>{
    $('nav button.active').classList.remove('active');btn.classList.add('active');
    $('.view.active').classList.remove('active');$('#'+btn.dataset.view).classList.add('active');
  };
});

/* ---------- flashcards ---------- */
(async ()=>{
  const data = (await loadJSON).flashcards;
  shuffle(data);let i=0;
  const q=$('#fcQ'),a=$('#fcA'),card=$('#fcCard');
  const show=_=>{q.textContent=data[i].q;a.textContent=data[i].a;card.classList.remove('flipped')};
  show();
  card.onclick=_=>card.classList.toggle('flipped');
  $('#fcPrev').onclick=_=>{i=(i-1+data.length)%data.length;show()};
  $('#fcNext').onclick=_=>{i=(i+1)%data.length;show()};
  $('#fcAsk').onclick=_=>window.open(promptLink(
    `I‚Äôm studying biologically-inspired algorithms.\nExplain the following concept to me in simple terms:\n‚Äú${data[i].q}‚Äù\n`),'_blank');
})();

/* ---------- MCQ ---------- */
(async ()=>{
  const data=(await loadJSON).multipleChoice;shuffle(data);
  const wrap=$('#mcqWrap'),scoreEl=$('#mcqScore');let score=0;
  data.forEach((q,idx)=>{
    shuffle(q.choices);
    const block=document.createElement('div');block.className='block';
    block.innerHTML=`<p>${idx+1}. ${q.question}</p>`;
    const opts=document.createElement('div');opts.style.display='grid';opts.style.gap='.75rem';
    const buttons=[];
    q.choices.forEach(c=>{
      const bt=document.createElement('button');bt.className='btn option';bt.textContent=c;
      bt.onclick=_=>{
        buttons.forEach(b=>b.disabled=true);
        if(c===q.answer){bt.classList.add('correct');score++;}
        else{bt.classList.add('wrong');buttons.find(b=>b.textContent===q.answer).classList.add('correct');}
        scoreEl.textContent=`Score: ${score}/${data.length}`;
      };
      buttons.push(bt);opts.appendChild(bt);
    });
    const ask=document.createElement('button');ask.className='btn btn-ghost';ask.textContent='Ask ChatGPT';
    ask.onclick=_=>window.open(promptLink(
      `I‚Äôm practicing exam MCQs on biologically-inspired algorithms.\nQuestion: ${q.question}\nOptions: ${q.choices.join(', ')}\nThe correct answer is ‚Äú${q.answer}‚Äù.\nGive an explanation of why it's correct and why the others are not.`),'_blank');
    block.append(opts,ask);wrap.appendChild(block);
  });
})();

/* ---------- Written ---------- */
(async ()=>{
  const data=(await loadJSON).writtenAnswer;shuffle(data);
  let i=0;const q=$('#waQ'),a=$('#waA');
  const render=_=>{const item=data[i];q.textContent=item.q;a.textContent='';};
  render();
  $('#waShow').onclick=_=>a.textContent=data[i].a;
  $('#waPrev').onclick=_=>{i=(i-1+data.length)%data.length;render()};
  $('#waNext').onclick=_=>{i=(i+1)%data.length;render()};
  $('#waAsk').onclick=_=>window.open(promptLink(
    `Explain the following exam concept from biologically-inspired algorithms in clear detail: ${data[i].q}`),'_blank');
})();

/* ---------- True / False ---------- */
(async ()=>{
  const data=(await loadJSON).trueFalse;shuffle(data);
  let i=0;const q=$('#tfQ'),fb=$('#tfFeedback'),buttons=$$('#tf button.option');
  const show=_=>{q.textContent=data[i].q;fb.textContent='';buttons.forEach(b=>{b.disabled=false;b.classList.remove('correct','wrong')})};
  show();
  buttons.forEach(b=>b.onclick=()=>{
    const ans=b.dataset.val==='true',correct=data[i].a;
    buttons.forEach(btn=>btn.disabled=true);
    if(ans===correct){b.classList.add('correct');fb.textContent='‚úì Correct';}
    else{b.classList.add('wrong');fb.textContent=`‚úó Incorrect ‚Äì it is ${correct}`;}
  });
  $('#tfPrev').onclick=_=>{i=(i-1+data.length)%data.length;show()};
  $('#tfNext').onclick=_=>{i=(i+1)%data.length;show()};
  $('#tfAsk').onclick=_=>window.open(promptLink(
    `In the context of biologically-inspired algorithms, evaluate the statement:\n‚Äú${data[i].q}‚Äù\nPlease give a brief explanation.`),'_blank');
})();

/* ---------- Notes ---------- */
(async()=>{
  const box=$('#notesBox');box.innerHTML=marked.parse(await (await fetch('notes.md')).text());
  const float=$('#selAsk');
  document.addEventListener('selectionchange',()=>{
    const sel=getSelection();
    if(!sel||sel.isCollapsed||!box.contains(sel.anchorNode)){float.style.display='none';return;}
    const r=sel.getRangeAt(0).getBoundingClientRect();
    float.style.top=`${r.bottom+window.scrollY+8}px`;
    float.style.left=`${r.left+window.scrollX}px`;
    float.style.display='block';
  });
  float.onclick=_=>{
    const text=getSelection().toString().trim();
    if(text)window.open(promptLink(`Please explain the following excerpt from my study notes on biologically-inspired algorithms:\n‚Äú${text}‚Äù`),'_blank');
  };
})();
</script>
</body>
</html>
