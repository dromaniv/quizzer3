<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Biologically-Inspired Algorithms &amp; Models Study App</title>

  <!-- Markdown parser -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    :root {
      --brand: #4a90e2;
      --bg: #f0f4f8;
      --card: #fff;
      --txt: #333;
      --button-bg: #f9f9f9;
      --button-text: #333;
      --button-border: #ccc;
      --radius: 8px;
      --shadow: rgba(0,0,0,0.1);
    }
    body.dark {
      --bg: #121212;
      --card: #1e1e1e;
      --txt: #eee;
      --button-bg: #2a2a2a;
      --button-text: #eee;
      --button-border: #555;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--txt);
      display: flex; flex-direction: column; min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex; align-items: center; justify-content: space-between;
      background: var(--brand); color: #fff; padding: 1rem;
      box-shadow: 0 2px 4px var(--shadow);
    }
    #dark-toggle {
      background: transparent; border: none; font-size: 1.2rem;
      cursor: pointer; color: #fff;
    }
    nav {
      display: flex; background: var(--card);
      box-shadow: 0 2px 4px var(--shadow); overflow-x: auto;
    }
    nav button {
      flex: 1 0 auto; padding: 0.75rem; border: none;
      background: var(--card); color: var(--txt);
      font-size: 1rem; cursor: pointer; transition: background 0.3s;
    }
    nav button.active,
    nav button:hover {
      background: var(--brand); color: #fff;
    }
    main {
      flex: 1; padding: 2rem; max-width: 800px; margin: auto; width: 100%;
    }
    .mode-section { display: none; }
    .mode-section.active { display: block; }

    /* Flashcards */
    .flashcard-container { perspective: 1200px; text-align: center; }
    .card {
      width: 90%; max-width: 320px; height: 200px; margin: auto; cursor: pointer;
      transform-style: preserve-3d; transition: transform 0.6s;
    }
    .card.flipped { transform: rotateY(180deg); }
    .card-face {
      position: absolute; width: 100%; height: 100%;
      backface-visibility: hidden; background: var(--card);
      border-radius: var(--radius); box-shadow: 0 4px 8px var(--shadow);
      display: flex; align-items: center; justify-content: center;
      padding: 1rem; text-align: center; font-size: 1.1rem;
    }
    .card-face.back { transform: rotateY(180deg); }
    .fc-controls {
      margin-top: 1rem; display: flex; gap: 1rem; justify-content: center;
    }
    .fc-controls button {
      padding: 0.5rem 1rem; border: none; border-radius: var(--radius);
      background: var(--brand); color: #fff; cursor: pointer;
    }

    /* Quiz / TrueFalse buttons */
    .quiz-item {
      margin-bottom: 1.5rem; padding: 1rem;
      background: var(--card); border-radius: var(--radius);
      box-shadow: 0 2px 4px var(--shadow);
    }
    .quiz-item p { margin-bottom: 0.75rem; }
    .quiz-item button,
    .tf-container button {
      width: 100%; margin: 0.25rem 0; padding: 0.5rem;
      border: 1px solid var(--button-border); border-radius: var(--radius);
      background: var(--button-bg); color: var(--button-text);
      cursor: pointer; transition: background 0.3s, border-color 0.3s;
    }
    .quiz-item button.correct { border-color: #4caf50; background: #e8f5e9; }
    .quiz-item button.wrong   { border-color: #f44336; background: #ffebee; }
    #quiz-score { text-align: center; font-weight: bold; margin-top: 1rem; }

    /* Written Answer */
    .wa-container, .tf-container {
      display: flex; flex-direction: column; gap: 1rem; align-items: center;
    }
    .wa-container textarea {
      width: 100%; min-height: 80px; padding: 0.5rem; border: 1px solid var(--button-border);
      border-radius: var(--radius); font-size: 1rem; resize: vertical;
      background: var(--card); color: var(--txt);
    }
    .wa-container button {
      padding: 0.5rem 1.5rem; border: none; border-radius: var(--radius);
      background: var(--brand); color: #fff; cursor: pointer;
    }
    .feedback { font-weight: bold; font-size: 1.1rem; }
    .feedback.correct { color: #4caf50; }
    .feedback.wrong   { color: #f44336; }
    .next-btn { background: #333; color: #fff; }

    /* Notes */
    #notes-container {
      background: var(--card); padding: 1rem; border-radius: var(--radius);
      box-shadow: 0 2px 4px var(--shadow); line-height: 1.6;
    }

    /* Mobile tweaks */
    @media (max-width: 600px) {
      main { padding: 1rem; }
      nav button { font-size: 0.9rem; padding: 0.6rem; }
      .quiz-item { padding: 0.75rem; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Biologically-Inspired Algorithms &amp; Models</h1>
    <button id="dark-toggle" aria-label="Toggle Dark Mode">🌙</button>
  </header>

  <nav>
    <button data-mode="flash" class="active">Flashcards</button>
    <button data-mode="mcq">Multiple Choice</button>
    <button data-mode="written">Written Answer</button>
    <button data-mode="truefalse">True / False</button>
    <button data-mode="notes">Notes</button>
  </nav>

  <main>
    <section id="flash" class="mode-section active">
      <div class="flashcard-container">
        <div id="card" class="card">
          <div class="card-face front" id="fc-q"></div>
          <div class="card-face back" id="fc-a"></div>
        </div>
        <div class="fc-controls">
          <button id="prev-fc">Previous</button>
          <button id="next-fc">Next</button>
        </div>
      </div>
    </section>

    <section id="mcq" class="mode-section">
      <div id="mcq-container"></div>
      <div id="quiz-score"></div>
    </section>

    <section id="written" class="mode-section">
      <div class="wa-container">
        <p id="wa-q"></p>
        <textarea id="wa-input" placeholder="Type your answer..."></textarea>
        <button id="wa-check">Check Answer</button>
        <div id="wa-feedback" class="feedback"></div>
        <button id="wa-next" class="next-btn">Next Question</button>
      </div>
    </section>

    <section id="truefalse" class="mode-section">
      <div class="tf-container">
        <p id="tf-q"></p>
        <div>
          <button data-val="true">True</button>
          <button data-val="false">False</button>
        </div>
        <div id="tf-feedback" class="feedback"></div>
        <button id="tf-next" class="next-btn">Next Question</button>
      </div>
    </section>

    <section id="notes" class="mode-section">
      <div id="notes-container">Loading notes…</div>
    </section>
  </main>

  <script>
  (async () => {
    // load JSON
    const resp = await fetch('data.json');
    const data = await resp.json();

    // shuffle helper
    function shuffle(a) {
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
    }

    // shuffle everything
    shuffle(data.flashcards);
    data.multipleChoice.forEach(q => shuffle(q.choices));
    shuffle(data.multipleChoice);
    shuffle(data.writtenAnswer);
    shuffle(data.trueFalse);

    // dark mode
    const toggle = document.getElementById('dark-toggle');
    const isDark = localStorage.getItem('darkMode') === 'enabled';
    if (isDark) {
      document.body.classList.add('dark');
      toggle.textContent = '☀️';
    }
    toggle.onclick = () => {
      const on = document.body.classList.toggle('dark');
      toggle.textContent = on ? '☀️' : '🌙';
      localStorage.setItem('darkMode', on ? 'enabled' : 'disabled');
    };

    // nav
    document.querySelectorAll('nav button').forEach(b => {
      b.onclick = () => {
        document.querySelectorAll('nav button').forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        document.querySelectorAll('.mode-section').forEach(s => s.classList.remove('active'));
        document.getElementById(b.dataset.mode).classList.add('active');
      };
    });

    // FLASHCARDS
    let fc = 0;
    const fcQ = document.getElementById('fc-q'),
          fcA = document.getElementById('fc-a'),
          card = document.getElementById('card');
    function showFC(i) {
      const c = data.flashcards[i];
      fcQ.textContent = c.q;
      fcA.textContent = c.a;
      card.classList.remove('flipped');
    }
    document.getElementById('next-fc').onclick = () => showFC(fc = (fc + 1) % data.flashcards.length);
    document.getElementById('prev-fc').onclick = () => showFC(fc = (fc - 1 + data.flashcards.length) % data.flashcards.length);
    card.onclick = () => card.classList.toggle('flipped');
    showFC(fc);

    // MULTIPLE CHOICE
    function buildMC() {
      let score = 0;
      const ctn = document.getElementById('mcq-container');
      ctn.innerHTML = '';
      data.multipleChoice.forEach((q,i) => {
        const box = document.createElement('div');
        box.className = 'quiz-item';
        box.innerHTML = `<p>${i+1}. ${q.question}</p>`;
        q.choices.forEach(ch => {
          const btn = document.createElement('button');
          btn.textContent = ch;
          btn.onclick = () => {
            if (ch === q.answer) { btn.classList.add('correct'); score++; }
            else {
              btn.classList.add('wrong');
              box.querySelectorAll('button').forEach(x => x.textContent === q.answer && x.classList.add('correct'));
            }
            box.querySelectorAll('button').forEach(x => x.disabled = true);
            document.getElementById('quiz-score').textContent = `Score: ${score} / ${data.multipleChoice.length}`;
          };
          box.appendChild(btn);
        });
        ctn.appendChild(box);
      });
      document.getElementById('quiz-score').textContent = `Score: 0 / ${data.multipleChoice.length}`;
    }
    buildMC();

    // WRITTEN ANSWER
    let wa = 0;
    const waQ = document.getElementById('wa-q'),
          waIn = document.getElementById('wa-input'),
          waFb = document.getElementById('wa-feedback'),
          waChk= document.getElementById('wa-check'),
          waNx = document.getElementById('wa-next');
    function showWA(i) {
      wa = i; waQ.textContent = data.writtenAnswer[i].q;
      waIn.value = ''; waFb.textContent = ''; waNx.style.display = 'none';
    }
    waChk.onclick = () => {
      const u = waIn.value.trim().toLowerCase(),
            r = data.writtenAnswer[wa].a.trim().toLowerCase();
      if (!u) return;
      if (u === r) waFb.textContent = '✅ Correct!', waFb.className = 'feedback correct';
      else waFb.textContent = `❌ Wrong. Answer: ${data.writtenAnswer[wa].a}`, waFb.className = 'feedback wrong';
      waNx.style.display = 'inline-block';
    };
    waNx.onclick = () => showWA((wa + 1) % data.writtenAnswer.length);
    showWA(0);

    // TRUE / FALSE
    let tf = 0;
    const tfQ = document.getElementById('tf-q'),
          tfFb= document.getElementById('tf-feedback'),
          tfB = document.querySelectorAll('#truefalse button[data-val]'),
          tfN = document.getElementById('tf-next');
    function showTF(i) {
      tf = i; tfQ.textContent = data.trueFalse[i].q;
      tfFb.textContent = ''; tfN.style.display = 'none';
      tfB.forEach(b => (b.disabled = false, b.classList.remove('correct','wrong')));
    }
    tfB.forEach(b => {
      b.onclick = () => {
        const val = b.dataset.val === 'true',
              ok  = data.trueFalse[tf].a;
        if (val === ok) b.classList.add('correct'), tfFb.textContent = '✅ Correct!', tfFb.className = 'feedback correct';
        else b.classList.add('wrong'), tfFb.textContent = `❌ Wrong. Answer: ${ok?'True':'False'}`, tfFb.className = 'feedback wrong';
        tfB.forEach(x => x.disabled = true);
        tfN.style.display = 'inline-block';
      };
    });
    tfN.onclick = () => showTF((tf + 1) % data.trueFalse.length);
    showTF(0);

    // NOTES (Markdown)
    const notesCt = document.getElementById('notes-container');
    fetch('notes.md').then(r => r.text()).then(md => {
      notesCt.innerHTML = marked.parse(md);
    });

  })();
  </script>
</body>
</html>