<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Metaheuristics Study App</title>
  <style>
    :root {
      --brand: #4a90e2;
      --bg: #f0f4f8;
      --card: #fff;
      --txt: #333;
      --radius: 8px;
      --shadow: rgba(0,0,0,0.1);
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      color: var(--txt);
      display: flex; flex-direction: column; min-height: 100vh;
    }
    header {
      background: var(--brand); color: white; padding: 1rem; text-align: center;
      box-shadow: 0 2px 4px var(--shadow);
    }
    nav {
      display: flex; justify-content: center;
      background: white; box-shadow: 0 2px 4px var(--shadow);
    }
    nav button {
      flex: 1; padding: 0.75rem; border: none; background: white;
      font-size: 1rem; cursor: pointer; transition: background 0.3s;
    }
    nav button.active, nav button:hover {
      background: var(--brand); color: white;
    }
    main {
      flex: 1; padding: 2rem; max-width: 800px; margin: auto; width: 100%;
    }
    .mode-section { display: none; }
    .mode-section.active { display: block; }

    /* Flashcards */
    .flashcard-container { perspective: 1200px; text-align: center; }
    .card {
      width: 320px; height: 200px; margin: auto; cursor: pointer;
      transform-style: preserve-3d; transition: transform 0.6s;
    }
    .card.flipped { transform: rotateY(180deg); }
    .card-face {
      position: absolute; width: 100%; height: 100%;
      backface-visibility: hidden; background: var(--card);
      border-radius: var(--radius); box-shadow: 0 4px 8px var(--shadow);
      display: flex; align-items: center; justify-content: center;
      padding: 1rem; font-size: 1.1rem; text-align: center;
    }
    .card-face.back { transform: rotateY(180deg); }

    .fc-controls { margin-top: 1rem; display: flex; justify-content: center; gap: 1rem; }
    .fc-controls button {
      padding: 0.5rem 1rem; border: none; border-radius: var(--radius);
      background: var(--brand); color: white; cursor: pointer;
      transition: background 0.3s;
    }

    /* Quiz items */
    .quiz-item {
      margin-bottom: 1.5rem; padding: 1rem;
      background: var(--card); border-radius: var(--radius);
      box-shadow: 0 2px 4px var(--shadow);
    }
    .quiz-item p { margin-bottom: 0.75rem; }
    .quiz-item button {
      width: 100%; margin: 0.25rem 0; padding: 0.5rem;
      border: 1px solid #ccc; border-radius: var(--radius);
      background: #f9f9f9; cursor: pointer;
      transition: background 0.3s, border-color 0.3s;
    }
    .quiz-item button.correct {
      border-color: #4caf50; background: #e8f5e9;
    }
    .quiz-item button.wrong {
      border-color: #f44336; background: #ffebee;
    }
    #quiz-score { text-align: center; font-weight: bold; margin-top: 1rem; }

    /* Written & True/False */
    .wa-container, .tf-container {
      display: flex; flex-direction: column; gap: 1rem; align-items: center;
    }
    .wa-container input {
      width: 100%; padding: 0.5rem; border: 1px solid #ccc;
      border-radius: var(--radius); font-size: 1rem;
    }
    .wa-container button, .tf-container button {
      padding: 0.5rem 1.5rem; border: none;
      border-radius: var(--radius); background: var(--brand);
      color: white; cursor: pointer; font-size: 1rem;
      transition: background 0.3s;
    }
    .feedback { font-weight: bold; font-size: 1.1rem; }
    .feedback.correct { color: #4caf50; }
    .feedback.wrong { color: #f44336; }
    .next-btn { background: #333; margin-top: 0.5rem; }
  </style>
</head>
<body>

  <header><h1>Metaheuristics Study App</h1></header>

  <nav>
    <button data-mode="flash" class="active">Flashcards</button>
    <button data-mode="mcq">Multiple Choice</button>
    <button data-mode="written">Written Answer</button>
    <button data-mode="truefalse">True / False</button>
  </nav>

  <main>
    <!-- Flashcards -->
    <section id="flash" class="mode-section active">
      <div class="flashcard-container">
        <div id="card" class="card">
          <div class="card-face front" id="fc-q"></div>
          <div class="card-face back" id="fc-a"></div>
        </div>
        <div class="fc-controls">
          <button id="prev-fc">Previous</button>
          <button id="next-fc">Next</button>
        </div>
      </div>
    </section>

    <!-- Multiple Choice -->
    <section id="mcq" class="mode-section">
      <div id="mcq-container"></div>
      <div id="quiz-score"></div>
    </section>

    <!-- Written Answer -->
    <section id="written" class="mode-section">
      <div class="wa-container">
        <p id="wa-q"></p>
        <input type="text" id="wa-input" placeholder="Type your answer..."/>
        <button id="wa-check">Check Answer</button>
        <div id="wa-feedback" class="feedback"></div>
        <button id="wa-next" class="next-btn">Next Question</button>
      </div>
    </section>

    <!-- True / False -->
    <section id="truefalse" class="mode-section">
      <div class="tf-container">
        <p id="tf-q"></p>
        <div>
          <button data-val="true">True</button>
          <button data-val="false">False</button>
        </div>
        <div id="tf-feedback" class="feedback"></div>
        <button id="tf-next" class="next-btn">Next Question</button>
      </div>
    </section>
  </main>

  <script>
  (async () => {
    const resp = await fetch('data.json');
    const data = await resp.json();

    // Mode navigation
    document.querySelectorAll('nav button').forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const mode = btn.dataset.mode;
        document.querySelectorAll('.mode-section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(mode).classList.add('active');
      };
    });

    // Flashcards
    let fcIdx = 0;
    const fcQ = document.getElementById('fc-q');
    const fcA = document.getElementById('fc-a');
    const card = document.getElementById('card');
    function showFC(i) {
      const c = data.flashcards[i];
      fcQ.textContent = c.q;
      fcA.textContent = c.a;
      card.classList.remove('flipped');
    }
    document.getElementById('next-fc').onclick = () => { fcIdx = (fcIdx + 1) % data.flashcards.length; showFC(fcIdx); };
    document.getElementById('prev-fc').onclick = () => { fcIdx = (fcIdx - 1 + data.flashcards.length) % data.flashcards.length; showFC(fcIdx); };
    card.onclick = () => card.classList.toggle('flipped');
    showFC(fcIdx);

    // Multiple Choice
    function buildMC() {
      let mcScore = 0;
      const cont = document.getElementById('mcq-container');
      cont.innerHTML = '';
      data.multipleChoice.forEach((q,i) => {
        const div = document.createElement('div');
        div.className = 'quiz-item';
        div.innerHTML = `<p>${i+1}. ${q.question}</p>`;
        q.choices.forEach(ch => {
          const btn = document.createElement('button');
          btn.textContent = ch;
          btn.onclick = () => {
            if (ch === q.answer) { btn.classList.add('correct'); mcScore++; }
            else {
              btn.classList.add('wrong');
              div.querySelectorAll('button').forEach(b => { if (b.textContent === q.answer) b.classList.add('correct'); });
            }
            div.querySelectorAll('button').forEach(b => b.disabled = true);
            document.getElementById('quiz-score').textContent = `Score: ${mcScore} / ${data.multipleChoice.length}`;
          };
          div.appendChild(btn);
        });
        cont.appendChild(div);
      });
      document.getElementById('quiz-score').textContent = `Score: 0 / ${data.multipleChoice.length}`;
    }
    buildMC();

    // Written Answer
    let waIdx = 0;
    const waQ = document.getElementById('wa-q'),
          waIn = document.getElementById('wa-input'),
          waFb= document.getElementById('wa-feedback'),
          waCheck = document.getElementById('wa-check'),
          waNext  = document.getElementById('wa-next');
    function showWA(i) {
      waIdx = i;
      waQ.textContent = data.writtenAnswer[i].q;
      waIn.value = ''; waFb.textContent = ''; waNext.style.display = 'none';
    }
    waCheck.onclick = () => {
      const user = waIn.value.trim().toLowerCase();
      const right = data.writtenAnswer[waIdx].a.trim().toLowerCase();
      if (!user) return;
      if (user === right) {
        waFb.textContent = '✅ Correct!'; waFb.className = 'feedback correct';
      } else {
        waFb.textContent = `❌ Wrong. Answer: ${data.writtenAnswer[waIdx].a}`; waFb.className = 'feedback wrong';
      }
      waNext.style.display = 'inline-block';
    };
    waNext.onclick = () => showWA((waIdx+1) % data.writtenAnswer.length);
    showWA(0);

    // True/False
    let tfIdx = 0;
    const tfQ = document.getElementById('tf-q'),
          tfFb= document.getElementById('tf-feedback'),
          tfBtns = document.querySelectorAll('#truefalse button[data-val]'),
          tfNext = document.getElementById('tf-next');
    function showTF(i) {
      tfIdx = i;
      tfQ.textContent = data.trueFalse[i].q;
      tfFb.textContent = ''; tfNext.style.display = 'none';
      tfBtns.forEach(b => { b.disabled = false; b.classList.remove('correct','wrong'); });
    }
    tfBtns.forEach(b => {
      b.onclick = () => {
        const val = b.dataset.val === 'true';
        const right = data.trueFalse[tfIdx].a;
        if (val === right) {
          b.classList.add('correct'); tfFb.textContent = '✅ Correct!'; tfFb.className = 'feedback correct';
        } else {
          b.classList.add('wrong'); tfFb.textContent = `❌ Wrong. Answer: ${right?'True':'False'}`; tfFb.className = 'feedback wrong';
        }
        tfBtns.forEach(x => x.disabled = true);
        tfNext.style.display = 'inline-block';
      };
    });
    tfNext.onclick = () => showTF((tfIdx+1) % data.trueFalse.length);
    showTF(0);

  })();
  </script>
</body>
</html>